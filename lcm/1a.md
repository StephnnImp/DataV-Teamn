# `0x1a` Check Control Message

- the api is quite verbose
- purely a display API, all the check control logic is CCM/LCM

### Related Commands

- `0x1b` Check Control Priority
- `0x50` Check Control Status Request
- `0x51` Check Control Status
- `0x52` Check Control Message Relay
- `0x57` "Check" Button

### Example Frames

    43 48 45 43 4B 20 45 4E 47 49 4E 45 20 4F 49 4C 20 4C 45 56 ("CHECK ENGINE OIL LEV")
    54 52 41 4E 53 2E 20 46 41 49 4C 53 41 46 45 20 50 52 4F 47 ("TRANS. FAILSAFE PROG")
    53 54 4F 50 21 45 4E 47 49 4E 45 20 4F 49 4C 50 52 45 53 53 ("STOP!ENGINE OILPRESS")
    43 48 45 43 4B 20 42 52 41 4B 45 20 4C 49 4E 49 4E 47 53 20 ("CHECK BRAKE LININGS ")
    20 20 43 48 45 43 4B 20 43 4F 4E 54 52 4F 4C 20 4F 4B 20 20 ("  CHECK CONTROL OK  ")

..
    
    30 05 80 1A 30 01 9E
    30 19 80 1A 30 00 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 83
    30 05 80 1A 35 00 9A
    30 19 80 1A 37 07 53 54 4F 50 21 45 4E 47 49 4E 45 20 4F 49 4C 50 52 45 53 53 99


## Parameters

Length will vary with *String*. (Actually no it won't... overwrites all 20 chars, or resets it.)

Property|Index|Length|Type
:-------|:----|:-----|:---
Layout  |`0`  |`1`   |Bitfield
Options |`1`  |`1`   |Bitfield
String  |`2`  |`-1`  |String

### Layout
    
    0x30 might be global CCM id?
    or maybe... 0b1111_0000 is display opts like 0x23 second byte?
    
    0b0011_0000: Clear
    0b0011_0110: Persist Indicators
    0b0011_0101: Recall
    0b0011_0111: Alert
    
### Options
    
    GONG    = 0b0001_1100
    CHEVRON = 0b0000_0011

#### Gong `0b0001_1100`
    
    GONG_NONE             = 0b000   0   # kein_gong
    GONG_HIGH_SINGLE      = 0b001   1   # gong_t3?
    GONG_HIGH_CONTINUOUS  = 0b010   2   # interm_gong
    GONG_HIGH_DOUBLE      = 0b011   3   # doppelgong
    GONG_LOW_SINGLE       = 0b100   4   # gong_t2?

LCM coding allows six possible gongs. Each gong is configurable as the following. I think they're "meta"- cluster API is not configurable.

    kein_gong           00  00  no gong
    gong_t3             01  10  gong type 3 (e.g. key in ignition warning)
    interm_gong         02  20  intermittent gong
    doppelgong          03  30  double gong
    gong_t2             05  50  gong type 2 (e.g. speed limit/temperature warning)
    gong_t1             06  60  gong type 1 (e.g. hourly beep)
    
    # meta?
    gong_t1&t2          04  40  gong type 1 and gong type 2
    erst_auftreten_gong 0F  F0  first occured gong


#### Chevron `0b0000_0011`

    CHEVRON_NONE          = 0b00
    CHEVRON_ON            = 0b01
    CHEVRON_OFF           = 0b10
    CHEVRON_BLINK         = 0b11

## Use Cases

### Check Control: Warning

![Check Control Overview](1a/cc.jpg)

> Messages concerning system faults are differentiated based on two priorities:

> **Priority 1**

> These defects are immediately indicated by a gong and a flashing
warning symbol (1). Simultaneous defects will be displayed
consecutively. These status reports remain in the display until the
defects are corrected. It is not possible to delete them by pressing
the CHECK button (3).

> - RELEASE PARKINGBRAKE
- STOP! ENGINE OILPRESS
- COOLANT TEMPERATURE
- SPEED LIMIT
- CHECK BRAKE FLUID
- FLAT TIRE
- LOAD LEVEL INACTIVE

> **Priority 2**

> These displays appear for 20 seconds when the ignition key is turned
to position 2. The warning symbols remain after the message
disappears. You can display the messages again by pressing the CHECK
button (3).

> - TRUNKLID OPEN
- DOOR OPEN
- FASTEN SEAT BELTS*
- WASHER FLUID LOW
- CHECK ENGINE OIL LEV
- CHECK COOLANT LEVEL
- CHECK LOWBEAM LAMPS
- CHECK HIGHBEAM LAMP
- CHECK BRAKE LAMPS
- CHECK SIDE LAMPS
- CHECK REAR LAMPS
- CHECK FRONT FOGLAMPS
- CHECK LICPLATE LAMP
- CHECK BACK UP LAMPS
- TRANS. FAILSAFE PROG
- CHECK BRAKE LININGS
- ENGINE FAILSAFE PROG
- OUTSIDE TEMP. +207 (â€“56)
- TIRE PRESSURE SET*
- CHECK TIRE PRESSURE*
- TIRE CHECK INACTIVE*

> **Displays after completion of trip**

> All of the malfunctions registered duringthe trip appear consecutively when the key is turned to Position 0.

> One of the following displays may appear:

> - CHECK ENGINE OIL LEV
- LIGHTS ON
- KEY IN IGNITION LOCK

> Display appears when you open the driver's door after parking the vehicle. A supplementary gong is also heard.

> Status reports remain available for a pe- riod of approx. three minutes after the display goes out and the key is re- moved from the ignition. Press the CHECK button. If there were multiple reports, press the CHECK button re- peatedly to view them all in sequence.

### Check Control: Recall

> **To check the Check Control**

> Press the CHECK button (3) with theignition key in position 2:CHECK CONTROL OK appears in the display.No malfunctions are present in the monitored systems.