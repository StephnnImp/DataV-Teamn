# `0x37` Radio Tone/Select

Radio `0x68` â†’ GT `0x3b`

*BMBT only.*

This command allows the radio to load the appropriate **Tone** (EQ) and **Select** (playback options) menus.

The Tone and Select functionality as introduced with the C23/C24 was almost unusable owing to the counterintuitive UX. Thankfully, the NG radios, and the accompanying UI update (`3-1/40+`) implemented a number of changes to make the functionality somewhat suitable for humans.

<!--- NG radios have different options
- options have new "active" UI state
- NG must specifcy source when loading Select
- NG allows navigating, and selecting rows via dial.-->

### Related Commands

- `0x36`
- `0x46`

### Example Frames

The message length alternates between two fixed lengths. The longer of the two is a single use case.

    68 04 3B 37 05 65
    68 04 3B 37 35 55
    68 04 3B 37 14 74
    68 04 3B 37 50 30
    68 04 3B 37 C0 A0
    68 04 3B 37 E0 80
    
    68 07 3B 37 82 19 15 0E E3
    68 07 3B 37 82 10 10 00 E1
    68 07 3B 37 80 00 00 10 F3

## Parameters

With the exception of one use case, the command has a one byte bitfield.
    
    # Parameter Bitmasks
    FUNCTION  = 0b1100_0000
    ROW       = 0b0011_0000
    SOURCE    = 0b0000_1000
    OPTS      = 0b0000_0111
    
### Function `0b1100_0000`

A distinction between legacy and NG radios is required with respect to **Select** as the NG radios (and accompanying updated UI) introduced new behaviour.

    FUNCTION_SELECT_NG      = 0b0000_0000
    FUNCTION_SELECT         = 0b0100_0000
    FUNCTION_TONE_SET       = 0b1000_0000
    FUNCTION_TONE           = 0b1100_0000

### Row `0b0011_0000`

Both **Tone** and **Select** menus will have up to four rows.

You'd rightly presume `ROW_A`, would be the first row, `ROW_B` the second, and so on, however, the rows are rendered in... *reverse*.

`ROW_A` is still highlighted by default, the rows are still cycled in order `A, B, C, D`, and if only three rows are needed, `ROW_D` is ommitted, but... yeah, just all upside down.
    
    ROW_A   = 0b0000_0000   # Default. Appears as the "last" row.
    ROW_B   = 0b0001_0000   # Appeas at the "second last" row etc.
    ROW_C   = 0b0010_0000
    ROW_D   = 0b0011_0000   # Omitted if only three rows req.

### Source `0b0000_1000`

Only applies to **Select**, and NG radios.

In order to display appropriate source **Select** options, NG radios must specify source. Legacy radios do not specify source as it is implied by the title writes `0x23`.

Note: the tape playback options were deprecated with the updated UI and NG radios.
    
    SOURCE_RADIO            = 0b0000_0000
    SOURCE_CDC              = 0b0000_1000

### Opts `0b0000_0111`

Only applicable to updated UI. Utilised by the NG radios only.
    
    OPTS_HIGHLIGHT          = 0b0000_0100   # Default "hover" state
    OPTS_ACTIVE             = 0b0000_0101

## Use Cases

### Select (BM53)

#### Radio

![Select Radio](37/bm53_rad.png)

Value|Symbol|Text|State
:----|:-----|:---|:----
`0x34`|`I`| Search non sensitive|Highlight
`0x35`|`< I >`| Search non sensitive|Activated
`0x24`|`II`| Search sensitive|Highlight
`0x25`|`< II >`| Search sensitive|Activated
`0x14`|`SCAN`| Station sample|Highlight
`0x15`|`SCAN`| Station sample|Activated
`0x04`|`m`| Manual station choice|Highlight 
`0x05`|`< m >`| Manual station choice|Activated

#### CDC

![Select CDC](37/bm53_cdc.png)

Value|Symbol|Text|State
:----|:-----|:---|:----
`0x3c`|`< >`| Music search|Highlight
`0x3d`|`< >`| Music search|Activated
`0x2c`|`RANDOM`| Random generator|Highlight
`0x2d`|`RANDOM`| Random generator|Activated
`0x1c`|`SCAN`| Track sample|Highlight
`0x1d`|`SCAN`| Track sample|Activated
`0x0c`|`<< >>`| Fast forward/reverse|Highlight
`0x0d`|`<< >>`| Fast forward/reverse|Activated

### Select (C23)

Source is inherent for the C23, so the examples below reflect the three possible contexts: radio, CDC, and tape.

Legacy radios do not support cycling through, or selecting options via the navigation dial. Cycling options requires repeated use of the BMBT's *SELECT* button. As for "activating" a highlighted option, I've not the faintest idea, just mash the BMBT buttons and see how you go.

#### Radio

![C23 Radio Select](37/c23_rad.jpg)

Row four/D is omitted as there are only three options.

Value |Symbol|Text
:-----|:-----|:---
`0x60`|`a`   |`Automatic search`
`0x50`|`SCAN`|`Station sample`
`0x40`|`m`   |`Manual station choice`

#### CDC

![C23 CDC Select](37/c23_cdc.jpg)

Value |Symbol|Text
:-----|:-----|:---
`0x70`|`< >`|`Music Search`
`0x60`|`RANDOM`|`Random generator`
`0x50`|`SCAN`|`Track sample`
`0x40`|`<< >>`|`Fast forward/reverse`

#### Tape

![C23 CDC Select](37/c23_tape.png)

Rows three (`ROW_C`) and four (`ROW_D`) is omitted as there are only two options.

Value |Symbol|Text
:-----|:-----|:---
`0x50`|`<< >>`|`Fast forward/reverse`
`0x40`|`< >`|`Music Search`

### Tone

    0x80..0x9f: (Tone) EQ. Set

Value |Text   |State
:-----|:------|:---
`0xc0`|Bass   |Highlight
`0xd0`|Treble |Highlight
`0xe0`|Fader  |Highlight
`0xf0`|Balance|Highlight


- tone button
- open with all bands set (37 long)
- navigate sequentially with "TONE" OR sequentially forward/back with rotary dial
- rotary select (36 with highlighted band, and current value)
- optional edit (36 with highlighted band, sequential change)
- rotary select (37 short, as if band navigated)