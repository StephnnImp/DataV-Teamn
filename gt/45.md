# `0x45` Set Radio UI

GT `0x3b` â†’ Radio `0x68`

`0x45` is, for the best part, to manage *when* the radio is in the foreground, and to a lesser extent, *how* it behaves in the foreground.

It's ostensibly the GT equivalent of `0x20`.

### Related

- `0x46` [Request Radio UI](../radio/46.md)

### Examples

    3B 04 68 45 00 12
    3B 04 68 45 02 10
    3B 04 68 45 03 11 

## Parameters

Single byte bitfield.
    
    BACKGROUND     = 0b0000_0001
    AUDIO_OBC      = 0b0000_0010
    
    # Only applicable to MK3 (3-1/40+), MK4
    NEW_UI         = 0b0001_0000
    NEW_UI_HIDE    = 0b1000_0000
    
### Background `0b0000_0001`

When set to `1`, the radio will still draw to display on user input i.e. changing radio station, but will relinquish the display after approx. 8 seconds.

When set to `0`, the radio will remain in the foreground.

### Audio+OBC `0b0000_0010`

When set to `1`, the radio will relinquish the lower portion portion of the display that is otherwise allocated to menus.

This is really only relevant to the C24 BM, as there is no contention in the absence of menus.

This has limited use as the Audio+OBC feature was removed with the updated UI (`3/1-40+`).

This allows the GT to display the OBC.

_I night be conflating a use case with a function...?_

### New UI `0b0001_0000`

*Only applcable to MK3 `3-1/40+`, and MK4.*

Flag to signify the new UI that was introduced in ~2001 (`3-1/40+`).

> The "radio" splitscreen function is only possible with NG *[next generation]* radios (BM53 and BM54 from 03.01).
> /--- BMW Service Training

The inference is that if an NG radio is required to support splitscreen, the new UI is not backwards compatible with legacy radios (C23 BM etc).

*The split screen only works for layouts `0x60..0x7f`...*

A flag that allows the old and new UIs to be differentiated suggests that the NG radios may retain support for the older UI.

### New UI (On Hide) `0b1000_0000`

*Only applcable to MK3 `3-1/40+`, and MK4.*

Not sure to be honest. This is set when hiding?

## Use Cases

### Resume at KL-R

The GT requesting the radio draw the radio UI at KL-R if the radio was on at ignition off

    3B 04 68 45 00 12

### Main Menu

A MENU press does not get sent to radio, but is broadcast, and instead handled by the GT, which will in turn, message the Radio relinquish (as presumably the radio does not listen for global button)
    
    bmbt  glo_h	BMBT-GLO  	0x34 (0011 0100) :bmbt_menu [Menu] Press
    gt  rad 45 91 (1001 0001) Info? [ON] Main Menu [ON]
    rad gt  46 01 (0000 0001) Main Menu [ON]
    bmbt  glo_h	BMBT-GLO  	0xb4 (1011 0100) :bmbt_menu [Menu] Release
        
    F0 04 FF 48 34 77
    3B 04 68 45 91 83
    68 04 3B 46 01 10
    F0 04 FF 48 B4 F7

### Audio OBC (Legacy UI)

The Audio and Onboard Computer (OBC) display "Audio+OBC" is a feature of the original UI, and allowed OBC data to be displayed alongside radio information.

While this feature was removed from the updated UI (MK3 3-1/40+, MK4), all radio variants, including next generation (NG) radios will support it.

![Audio+OBC](../radio/audio_obc/mk1_gt/audio_obc_enabled.JPG)
_Audio+OBC: The MK1 GT, and BM53 with the Audio+OBC feature enabled._


![Audio+OBC](../radio/audio_obc/vm_gt/audio_obc_enabled.JPG)
_Audio+OBC: The Video Module GT, and BM53 with the Audio+OBC feature enabled._

The bit is set/unset when "Audio+OBC" is enabled/disabled via the "Set" menu. It prevents (_or possibly makes menus a timeout?_) the radio from rendering any menus, thus the OBC remains in the foreground.

<!--![Audio+OBC](../radio/audio_obc/mk1_gt/set_audio_obc.JPG)-->
<!--_Audio+OBC: Audio+OBC settings..._-->
<!--![Audio+OBC](../radio/audio_obc/vm_gt/set_audio_obc.JPG)-->
<!--_Audio+OBC: Audio+OBC settings..._-->

### Updated UI

- Presumably due to split screen which had different fields.
- There's no way of determining if split is enabled, well, short of coding?