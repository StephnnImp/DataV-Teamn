# `0x45` Set Radio UI

GT `0x3b` â†’ Radio `0x68`

`0x45` is, for the best part, to manage *when* the radio is in the foreground, and to a lesser extent, *how* it behaves in the foreground.

It's ostensibly the GT equivalent of `0x20`.

### Related

- `0x46` [Request Radio UI](../radio/46.md)

### Examples

    # C23 BM
    3B 04 68 45 00 12
    3B 04 68 45 02 10   # 0b0000_0010
    3B 04 68 45 03 11   # 0b0000_0011
    
    # BM53
    3B 04 68 45 0A 18   # 0b0000_1010
    3B 04 68 45 0E 1C   # 0b0000_1110

## Parameters

Single byte bitfield.
    
    PRIORITY       = 0b0000_0001
    AUDIO_OBC      = 0b0000_0010
    
    # Only applicable to MK3 (3-1/40+), MK4
    NEW_UI         = 0b0001_0000
    NEW_UI_HIDE    = 0b1000_0000
    
### Priority `0b0000_0001`
    
    PRIORITY_RAD    = 0
    PRIORITY_GT     = 1

When set to `1`, the radio will still draw to display on user input i.e. changing radio station, but will relinquish the display after approx. 8 seconds.

When set to `0`, the radio will remain in the foreground.

### Audio+OBC `0b0000_0010`

    AUDIO_OBC_OFF = 0
    AUDIO_OBC_ON  = 1

When set to `1`, the radio will relinquish the lower portion portion of the display that is otherwise allocated to menus.

This is not applicable to the C23 BM as it does not use menus (e.g. radio presets, CDC discs), thus there is no contention for the lower portion of the display.

The feature was removed with the introduction of the NG radios/updated UI.

*The functional equivalence of the 8-bit bitfield between `0x45` and `0x46` suggests this bit might be better described as "only show header"*

### New UI `0b0001_0000`

*MK3 `3-1/40+` and MK4 only!*

Flag to signify the new UI that was introduced in ~2001 (`3-1/40+`).

I'm unaware of what effect this flag has. Allowing the radio to differentiate between the UI versions might suggest some degree of backwards compatibility- possibly related to the video module GT.

### New UI (On Hide) `0b1000_0000`

*MK3 `3-1/40+` and MK4 only!*

This flag is set whenever `BACKGROUND` is set to `1`, i.e. when MENU is pressed.

Like above, I'm not sure what effect this has.

## Use Cases

### Main Menu

A MENU press does not get sent to radio, but is broadcast, and instead handled by the GT `0x3b`, which will in turn, message the Radio `0x68`, requesting it relegate itself to the background.
        
    F0 04 FF 48 34 77   # MENU button press
    3B 04 68 45 91 83   # GT (4-1/00) requesting radio relinquish foreground
    68 04 3B 46 01 10   # Radio relinquishing foreground

### Resume at KL-R

The GT requesting the radio draw the radio UI at KL-R if the radio was on at ignition off

    3B 04 68 45 00 12   # Video Module GT

### Audio OBC (Legacy UI)

The Audio and Onboard Computer (OBC) display "Audio+OBC" is a feature of the original UI, and allowed OBC data to be displayed alongside radio information.

While this feature was removed from the updated UI (MK3 3-1/40+, MK4), all radio variants, including next generation (NG) radios will support it.

![Audio+OBC](../radio/audio_obc/mk1_gt/audio_obc_enabled.JPG)
_Audio+OBC: The MK1 GT, and BM53 with the Audio+OBC feature enabled._

![Audio+OBC](../radio/audio_obc/vm_gt/audio_obc_enabled.JPG)
_Audio+OBC: The Video Module GT, and BM53 with the Audio+OBC feature enabled._

The bit is set/unset when "Audio+OBC" is enabled/disabled via the "Set" menu. It prevents (_or possibly makes menus a timeout?_) the radio from rendering any menus, thus the OBC remains in the foreground.